@using Microsoft.AspNetCore.Identity
@using Amigoz.Models
@inject SignInManager<AppUser> SignInManager
@inject UserManager<AppUser> UserManager

<ul class="navbar-nav align-items-center">
    @if (SignInManager.IsSignedIn(User))
    {
        <li class="nav-item d-flex align-items-center me-3">
            <a class="d-flex align-items-center text-decoration-none" asp-area="Identity" asp-page="/Account/Manage/Index" title="Manage Profile">
                <div class="user-profile-frame me-2">
                    <div class="user-inner-avatar">
                        <i class="bi bi-person-fill text-secondary"></i>
                    </div>
                </div>
                <span class="fw-600 text-dark small d-none d-md-inline">@User.Identity?.Name</span>
            </a>
        </li>

        <li class="nav-item">
            <form class="form-inline" asp-area="Identity" asp-page="/Account/Logout"
                  asp-route-returnUrl="@Url.Action("Index", "Home", new { area = "" })">
                <button type="submit" class="logout-link-btn">
                    <i class="bi bi-box-arrow-right me-1"></i> Logout
                </button>
            </form>
        </li>
    }
    else
    {
        <li class="nav-item">
            <a class="btn-login-minimal" asp-area="Identity" asp-page="/Account/Login">Log In</a>
        </li>
        <li class="nav-item ms-2">
            <a class="btn-register-minimal" asp-area="Identity" asp-page="/Account/Register">Sign Up</a>
        </li>
    }
</ul>

<style>
    .fw-600 {
        font-weight: 600;
    }

    /* The "Story" style avatar frame */
    .user-profile-frame {
        width: 36px;
        height: 36px;
        background: linear-gradient(45deg, #f09433, #e6683c, #dc2743, #cc2366, #bc1888);
        border-radius: 50%;
        padding: 2px;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: transform 0.2s ease;
    }

        .user-profile-frame:hover {
            transform: scale(1.1);
        }

    .user-inner-avatar {
        background: white;
        width: 100%;
        height: 100%;
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        font-size: 1.1rem;
    }

    /* Logout Button Styling */
    .logout-link-btn {
        background: none;
        border: 1px solid #dbdbdb;
        color: #262626;
        font-size: 0.85rem;
        font-weight: 600;
        padding: 5px 15px;
        border-radius: 8px;
        transition: all 0.2s ease;
    }

        .logout-link-btn:hover {
            background-color: #fafafa;
            border-color: #262626;
            color: #ed4956; /* Instagram Red on hover */
        }

    /* Auth Buttons for Guests */
    .btn-login-minimal {
        color: #0095f6;
        text-decoration: none;
        font-weight: 700;
        font-size: 0.9rem;
        padding: 8px 12px;
    }

    .btn-register-minimal {
        background-color: #0095f6;
        color: white !important;
        text-decoration: none;
        font-weight: 700;
        font-size: 0.9rem;
        padding: 6px 16px;
        border-radius: 8px;
        transition: opacity 0.2s;
    }

        .btn-register-minimal:hover {
            opacity: 0.8;
        }
</style>